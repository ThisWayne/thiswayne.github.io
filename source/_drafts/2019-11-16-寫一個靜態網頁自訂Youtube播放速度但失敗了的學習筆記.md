---
title: 寫一個靜態網頁自訂Youtube播放速度但失敗了的學習筆記
date: 2019-11-16 16:59:07
urlname:
tags:
---

我需要這樣的一個網頁的情況是，我本身在學習爵士鼓，有些時候老師會教一首歌怎麼打，但一開始肢體協調性以及對歌不夠熟悉，沒有辦法以歌曲的原速度跟著打鼓，所以會先用慢一點的速度，通常播放的情況是用手機的Youtube APP，而Youtube APP的速度調整只能以0.25倍為單位，我常用的是0.75倍或是1倍，但0.75倍到1倍有時候差太多，通常來說練習會以5~10個BPM慢慢往上加，所以打算寫一個靜態網頁，功能是貼上Youtube網址然後有幾個大按鈕可以一點一點的加速、可以設定AB段循環。

## 已知可以控制瀏覽器影片播放器的速度

用電腦的瀏覽器看Youtube即使調到2倍速有時候還是覺得速度很慢，所以會直接在console寫個JavaScript程式調到想要的速度，所以我應該可以在自己的網頁上用一個iframe把Youtube的影片嵌入在裡面，然後從自己的網頁上看怎麼控制嵌入在裡面的Youtube影片？

## Youtube官方的嵌入影片播放器API

查了一下，Youtube官方本身就有寫一個如果要嵌入Youtube影片可以用的library

[YouTube Player API Reference for iframe Embeds](https://developers.google.com/youtube/iframe_api_reference)
[YouTube Embedded Players and Player Parameters](https://developers.google.com/youtube/player_parameters)

## API播放速度的參數

文件上寫Playback rates may include values like 0.25, 0.5, 1, 1.5, and 2.，測試效果，最慢是0.25，最快是2，其他參數輸入了都沒有效果

## Youtube在電腦版瀏覽器上播放可以客製化播放速度

弄到一半發現原來電腦版瀏覽器上播放速度可以0~2倍速度客製化，之前都直接按快捷鍵調整沒發現呵呵，但是手機板的APP還是沒有辦法小刻度的調，用手機的瀏覽器然後選擇電腦版的網頁就可以

ToDo: 圖片

## 如果Youtube的JavaScript library可以調iframe裡面的Youtube播放器速度，我應該也可以自己寫個JavaScript調iframe裡面的播放器速度？

答案是一樣不能用較小的刻度調，查了一下網頁與內嵌iframe網頁的溝通方法，要靠Window.postMessage，簡單來說就是網頁透過postMessage把資料傳給內嵌網頁，內嵌網頁透過message event接收資料，用chrome的話可以用monitorEvents(window, "message")在console來看兩邊溝通的log，以Youtube的情況來看，內嵌網頁會把可以呼叫的interface以及參數提供給外面的網頁呼叫，其中參數就限定了設定播放速度的interface接受的速度只能從0.25~2倍速並以0.25的刻度增加，我也不可能改內嵌網頁的API，可以收工了呵呵

## 參考
